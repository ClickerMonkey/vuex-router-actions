!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("VuexRouterActions",[],t):"object"==typeof exports?exports.VuexRouterActions=t():n.VuexRouterActions=t()}(window,function(){return function(n){var t={};function o(e){if(t[e])return t[e].exports;var i=t[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=n,o.c=t,o.d=function(n,t,e){o.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:e})},o.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},o.t=function(n,t){if(1&t&&(n=o(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)o.d(e,i,function(t){return n[t]}.bind(null,i));return e},o.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(t,"a",t),t},o.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},o.p="",o(o.s=0)}([function(n,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e,i,r="VuexRouterActions must be passed as a plugin to one store",c="Cached action isInvalid must be a function.",u="Cached action getKey must be a function.",a="Cached action getResultKey must be a function.",f="An action passed is not a valid Vuex action.",s=function(n,t,o){return!1},l=y(),d=0,p=0,v=[];function y(){return{onActionStart:function(){},onActionReject:function(){},onActionResolve:function(){},onActionEnd:function(){},onActionsDone:function(){},createCacheKey:function(n){return JSON.stringify(n)}}}function h(){v.forEach(function(n){return n()}),v=[]}function A(n){var t=n.action,o=n.isInvalid;K("function"==typeof o,c);var e=void 0;return v.push(function(){e=void 0}),g(t,"",function(n){return function(t,i){return(void 0===e||o.call(this,t,i))&&(e=n.apply(this,arguments)),e}})}function b(n,t){var o=R({},l,t),e=n.action,i=n.getKey;K("function"==typeof i,u);var r=void 0,c=void 0;return v.push(function(){r=void 0,c=void 0}),g(e,"",function(n){return function(t,e){var u=o.createCacheKey(i.call(this,t,e));return void 0!==r&&u===r||(r=u,c=n.apply(this,arguments)),c}})}function j(n,t){var o=R({},l,t),e=n.action,i=n.getKey,r=n.getResultKey;K("function"==typeof r,a);var c=void 0,u=Object.create(null);return v.push(function(){c=void 0,u=Object.create(null)}),g(e,"",function(n){return function(t,e){var a=i?o.createCacheKey(i.call(this,t,e)):void 0;a!==c&&(c=a,u=Object.create(null));var f=o.createCacheKey(r.call(this,t,e));return f in u||(u[f]=n.apply(this,arguments)),u[f]}})}function m(n,t,o){return o?(n.onActionStart=o.onActionStart||t.onActionStart,n.onActionReject=o.onActionReject||t.onActionReject,n.onActionResolve=o.onActionResolve||t.onActionResolve,n.onActionEnd=o.onActionEnd||t.onActionEnd,n.onActionsDone=o.onActionsDone||t.onActionsDone,n):t}function R(n,t,o){return o?(n.createCacheKey=o.createCacheKey||t.createCacheKey,n):t}function C(n,t){return P(n,function(n,o){return g(n,o,t)})}function g(n,t,o){if(O(n))return o(n,t);if(x(n))return{root:n.root,handler:o(n.handler,t)};throw f}function O(n){return"function"==typeof n}function x(n){return"object"==typeof n&&"function"==typeof n.handler}function P(n,t){var o=Object.create(null);for(var e in n)o[e]=t(n[e],e);return o}function K(n,t){if(!n)throw t}t.default=function(n){return m(l,l,n),R(l,l,n),function(n){K(void 0===i,r),i=n}},t.actionsDestroy=function(){i=e,l=y(),d=0,p=0,h()},t.actionsDefaultOptions=y,t.actionsDestroyCache=h,t.actionBeforeRoute=function(n,t){void 0===t&&(t=s);var o=function(o,e,c){K(void 0!==i,r),i.dispatch(n,o).then(function(n){c()},function(r){c(t(o,e,r,i,n))})};return{beforeRouteEnter:o,beforeRouteUpdate:o}},t.actionOptional=function(n,t){return void 0===t&&(t=function(){return null}),new Promise(function(o,e){n.then(o,function(n){return o(t())})})},t.actionsCachedConditional=function(n){return P(n,function(n){return A(n)})},t.actionCachedConditional=A,t.actionsCached=function(n,t){var o=R({},l,t);return P(n,function(n){return b(n,o)})},t.actionCached=b,t.actionsCachedResults=function(n,t){var o=R({},l,t);return P(n,function(n){return j(n,o)})},t.actionCachedResults=j,t.actionsWatch=function(n,t){var o=m({},l,t),e=t&&t.onActionsDone,i=0,r=0,c=function(n,t){(e?++i:++p)===n&&o.onActionsDone(t)};return C(n,function(n,t){return function(i,u){var a=n.apply(this,arguments),f=e?++r:++d;return a instanceof Promise?(o.onActionStart(t,f,i,u),a.then(function(n){o.onActionResolve(t,f,i,u,n),o.onActionEnd(t,f,i,u,n,!0),c(f,i)},function(n){o.onActionReject(t,f,i,u,n),o.onActionEnd(t,f,i,u,n,!1),c(f,i)})):(o.onActionStart(t,f,i,u),o.onActionEnd(t,f,i,u,a,!0),c(f,i)),a}})},t.actionsProtect=function(n){return C(n,function(n){return function(t,o){return function(n){return n instanceof Promise?n:n?Promise.resolve(n):Promise.reject(n)}(n.apply(this,arguments))}})},t.actionsLoading=function(n,t){var o=0,e=!1,c=function(t){var c=o>0;c!==e&&(K(void 0!==i,r),e=c,function(n){return"string"==typeof n}(n)?i.commit(n,e):function(n){return"function"==typeof n}(n)&&n(t,e))};return C(t,function(n){return function(t,e){var i=n.apply(this,arguments);if(i instanceof Promise){var r=function(n){return function(){o--,c(n)}}(t);o++,i.then(r,r),c(t)}return i}})}}])});