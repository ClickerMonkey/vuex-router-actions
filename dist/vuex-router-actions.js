!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("VuexRouterActions",[],t):"object"==typeof exports?exports.VuexRouterActions=t():n.VuexRouterActions=t()}(window,function(){return function(n){var t={};function e(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=n,e.c=t,e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:o})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)e.d(o,r,function(t){return n[t]}.bind(null,r));return o},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=0)}([function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i="VuexRouterActions must be passed as a plugin to one store",c="Cached action handler must be a function.",u="Cached action isInvalid must be a function.",f="Cached action getKey must be a function.",a="An action passed is not a valid Vuex action.",l=function(n,t,e){return!1},s=v(),d=0,p=0;function v(){return{onActionStart:function(){},onActionReject:function(){},onActionResolve:function(){},onActionEnd:function(){},onActionsDone:function(){},createCacheKey:function(n){return JSON.stringify(n)}}}function y(n,t,e){return e?(n.onActionStart=e.onActionStart||t.onActionStart,n.onActionReject=e.onActionReject||t.onActionReject,n.onActionResolve=e.onActionResolve||t.onActionResolve,n.onActionEnd=e.onActionEnd||t.onActionEnd,n.onActionsDone=e.onActionsDone||t.onActionsDone,n):t}function A(n,t,e){return e?(n.createCacheKey=e.createCacheKey||t.createCacheKey,n):t}function h(n,t){var e=Object.create(null);for(var o in n){var r=n[o];b(r)?e[o]=t(r,o):j(r)?e[o]={root:r.root,handler:t(r.handler,o)}:m(!1,a)}return e}function b(n){return"function"==typeof n}function j(n){return"object"==typeof n&&"function"==typeof n.handler}function m(n,t){if(!n)throw t}t.default=function(n){return y(s,s,n),A(s,s,n),function(n){m(void 0===r,i),r=n}},t.actionsDestroy=function(){r=o,s=v(),d=0,p=0},t.actionsDefaultOptions=v,t.actionBeforeRoute=function(n,t){void 0===t&&(t=l);var e=function(e,o,c){m(void 0!==r,i),r.dispatch(n,e).then(function(n){c()},function(i){c(t(e,o,i,r,n))})};return{beforeRouteEnter:e,beforeRouteUpdate:e}},t.actionOptional=function(n,t){return void 0===t&&(t=function(){return null}),new Promise(function(e,o){n.then(e,function(n){return e(t())})})},t.actionsCachedConditional=function(n){var t=Object.create(null),e=Object.create(null),o=function(o){var r=n[o],i=r.handler,f=r.isInvalid;m("function"==typeof i,c),m("function"==typeof f,u),t[o]=function(n,t){return o in e&&!f.call(this,n,t)||(e[o]=i.call(this,n,t)),e[o]}};for(var r in n)o(r);return t},t.actionsCached=function(n,t){var e=A({},s,t),o=Object.create(null),r=Object.create(null),i=Object.create(null),u=function(t){var u=n[t],a=u.handler,l=u.getKey;m("function"==typeof a,c),m("function"==typeof l,f),o[t]=function(n,o){var c=e.createCacheKey(l.call(this,n,o));return c!==i[t]&&(i[t]=c,r[t]=a.call(this,n,o)),r[t]}};for(var a in n)u(a);return o},t.actionsWatch=function(n,t){var e=y({},s,t),o=t&&t.onActionsDone,r=0,i=0,c=function(n,t){(o?++r:++p)===n&&e.onActionsDone(t)};return h(n,function(n,t){return function(r,u){var f=n.call(this,r,u),a=o?++i:++d;return f instanceof Promise?(e.onActionStart(t,a,r,u),f.then(function(n){e.onActionResolve(t,a,r,u,n),e.onActionEnd(t,a,r,u,n,!0),c(a,r)},function(n){e.onActionReject(t,a,r,u,n),e.onActionEnd(t,a,r,u,n,!1),c(a,r)})):(e.onActionStart(t,a,r,u),e.onActionEnd(t,a,r,u,f,!0),c(a,r)),f}})},t.actionsProtect=function(n){return h(n,function(n){return function(t,e){return function(n){return n instanceof Promise?n:n?Promise.resolve(n):Promise.reject(n)}(n.call(this,t,e))}})},t.actionsLoading=function(n,t){var e=0,o=!1,c=function(t){var c=e>0;c!==o&&(m(void 0!==r,i),o=c,function(n){return"string"==typeof n}(n)?r.commit(n,o):function(n){return"function"==typeof n}(n)&&n(t,o))};return h(t,function(n){return function(t,o){var r=n.call(this,t,o);if(r instanceof Promise){var i=function(n){return function(){e--,c(n)}}(t);e++,r.then(i,i),c(t)}return r}})}}])});